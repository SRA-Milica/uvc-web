import{d as E,f as h,E as S,S as i,a,F as u,r as m,u as c,b as o,w,a5 as _,J as C,H as L,ag as j,M as T,N as A,o as r,t as l,a2 as D,ah as N,ai as U,aj as B}from"./index-75810c09.js";const F={class:"text-base text-center"},I=o("p",{class:"text-lg text-danger font-bold text-center mb-3 underline"},"Emergency Message",-1),J={class:"text-danger text-center font-bold mb-10"},M={class:"text-lg text-center"},R={class:"flex justify-center"},V={class:"w-[80%] md:w-1/4"},q=["onClick"],O=E({__name:"AppLogin",setup(z){const y=C(),d=L(),g=B(),n=h({id:"",pw:""}),x=(s,e)=>{n.id=s,n.pw=e};let p=S(!1);const f=h(i.auth),k=()=>{f==null?p.value=!0:p.value=!1},b=async()=>{try{const e=await(await j(n)).json();i.auth=e;const t=y.query;t.to?d.push(t.to):d.push("/"),(e.role==="Staff"||e.role==="Administrator")&&await v()}catch(s){alert(s)}};async function v(){try{const s=T(A.Push,"get_token"),e=await fetch(s,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Network response was not ok");i.token_info=await e.json()}catch(s){console.error("Error fetching JSON data:",s)}}return(s,e)=>(r(),a(u,null,[(r(!0),a(u,null,m(c(U),t=>(r(),a("div",{class:"card w-[50%] mx-auto emergency-message my-10",key:t.id},[o("div",{onClick:k},[o("p",F,l(c(D)(t.date_sent)),1),I,o("h1",J,l(t.title),1),o("p",M,l(c(N)(t.context)),1)])]))),128)),o("div",R,[o("div",V,[w(o("input",{class:"input mb-3",type:"text",placeholder:"Enter you email or ID","onUpdate:modelValue":e[0]||(e[0]=t=>n.id=t)},null,512),[[_,n.id]]),w(o("input",{class:"input",type:"password",placeholder:"Enter your password","onUpdate:modelValue":e[1]||(e[1]=t=>n.pw=t)},null,512),[[_,n.pw]]),o("button",{class:"button primary-button w-full mt-5",onClick:b}," Log in "),o("div",null,[(r(!0),a(u,null,m(c(g),t=>(r(),a("button",{class:"button secondary-button w-full mt-3",key:t.id,onClick:H=>x(t.id,t.pw)},l(t.name),9,q))),128))])])])],64))}});export{O as default};
